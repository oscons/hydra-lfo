{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "src/components/general.js",
    "src/components/generators.js",
    "src/components/maths.js",
    "src/components/modifiers.js",
    "src/components/time.js",
    "src/components/util.js",
    "src/hydralfo.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "import {ud, undefault, expand_args, freeze_values, mix_values, get_time, get_bpm} from \"./util\";\n\nconst _functions = {};\n\n_functions.set = {doc: ``\n    , fun: (args) => {\n        const {v: value} = expand_args({v: 0}, args);\n\n        return (input, gen_args, run_args) => {\n            const vv = freeze_values(value, run_args, gen_args);\n            return vv;\n        };\n    }};\n\n_functions.use = {fun: (args) => {\n    const {n: name, c: copy} = expand_args({n: \"val\", c: false}, args);\n\n    return (input, gen_args, run_args) => {\n        const [nv, cv] = freeze_values([name, copy], run_args, gen_args);\n\n        let ret = gen_args.values[nv];\n        \n        if (cv) {\n            ret = input;\n        }\n        gen_args.current_value = nv;\n\n        return ret;\n    };\n}};\n\n_functions.used = {fun: () => ((_, gen_args) => gen_args.current_value)};\n\n_functions.noop = {fun: () => ((input) => input)};\n\nexport const functions = _functions;\n",
    "import {ud, undefault, expand_args, freeze_values, mix_values, get_time, get_bpm} from \"./util\";\n\nconst _functions = {};\n\nconst TAU = 2 * Math.PI;\n\n_functions.sin = {fun: (args) => {\n    const {f: frequency, s: scale, o: offset} = expand_args({f: 1, s: 1, o: 0}, args);\n\n    return (input, gen_args, run_args) => {\n        const [fv, sv, ov] = freeze_values([frequency, scale, offset], run_args, gen_args);\n        let time = 0;\n\n        if (typeof input === 'undefined') {\n            time = get_time(gen_args, run_args);\n            \n        } else {\n            time = input;\n        }\n        time = undefault(time, Math.PI);\n\n        return (((Math.sin(time * TAU * fv) / 2) + 0.5) * sv) + ov;\n    };\n}};\n\n_functions.rnd = {fun: (args) => {\n    const {s: scale, o: offset, m: mix} = expand_args({s: ud, o: 0, m: 0}, args);\n\n    return (input, gen_args, run_args) => {\n        const [sv, ov, mv] = freeze_values([scale, offset, mix], run_args, gen_args);\n\n        let svx = 1;\n        if (typeof input === 'undefined') {\n            if (typeof sv !== 'undefined') {\n                svx = sv;\n            }\n        } else if (typeof sv === 'undefined') {\n            svx = input;\n        } else {\n            svx = mix_values(svx, input, mv);\n        }\n\n        return (Math.random() * svx) + ov;\n    };\n}};\n\n_functions.rand = _functions.rnd;\n\n_functions.range = {fun: (args) => {\n    const {u: upper, l: lower, s: step} = expand_args({u: 10, l: 0, s: 1}, args);\n\n    return (input, gen_args, run_args) => {\n        const [sv, uv, lv] = freeze_values([step, upper, lower], run_args, gen_args);\n        \n        let npi = 0;\n        if (gen_args.private_state.prev) {\n            const {spi = 0} = gen_args.private_state.prev;\n\n            npi = spi + sv + input;\n\n            if (npi >= uv) {\n                npi = lv;\n            }\n\n            if (npi < lv && sv < 0) {\n                npi = uv;\n            }\n        } else if (sv > 0) {\n            npi = lv;\n        } else {\n            npi = uv;\n        }\n\n        gen_args.private_state.prev = {spi: npi};\n\n        return npi;\n    };\n}};\n\n_functions.iter = {fun: (args) => {\n    const {v: values, s: step} = expand_args({v: [0, 1], s: 1}, args);\n\n    return (input, gen_args, run_args) => {\n        const [vv, sv] = freeze_values([values, step], run_args, gen_args);\n\n        let {pi = 0} = gen_args.private_state.prev ? gen_args.private_state.prev : {};\n\n        if (gen_args.private_state.prev) {\n            pi = sv + pi + undefault(input, 0);\n        }\n        gen_args.private_state.prev = {pi};\n\n        const vs = vv;\n        let idx = Math.floor(pi);\n\n        idx = idx % vs.length;\n\n        const val = vs[idx];\n\n        if (typeof val === 'function') {\n            return val(input, gen_args, run_args);\n        }\n        return val;\n    };\n}};\n\n_functions.choose = {fun: (args) => {\n    const {v: values, s: scale} = expand_args({v: [0, 1], s: 1}, args);\n\n    return (input, gen_args, run_args) => {\n        const [vv, sv] = freeze_values([values, scale], run_args, gen_args);\n\n        if (vv.length === 0) {\n            return 0;\n        }\n        \n        let idx = undefault(input, 0);\n        idx = idx * sv;\n\n        idx = Math.floor(Math.abs(idx));\n        idx = idx % vv.length;\n\n        let val = vv[idx];\n\n        const fmark = `choose_mark_${new Date().getTime()}`;\n        let maxcnt = 10;\n\n        while (typeof val === 'function') {\n            const fn = val;\n            fn.__choose_mark = fmark;\n\n            val = fn(...run_args, gen_args);\n            if (maxcnt-- <= 0 || (typeof val === 'function' && val.__choose_mark === fmark)) {\n                // loop detected\n                val = 0;\n                break;\n            }\n\n            delete fn.__choose_mark;\n        }\n        return val;\n    };\n}};\n\nexport const functions = _functions;\n",
    "import {ud, undefault, expand_args, freeze_values, mix_values, get_time, get_bpm} from \"./util\";\n\nconst _functions = {};\n\n_functions.add = {fun: (args) => {\n    const {v: value} = expand_args({v: 0}, args);\n\n    return (input, gen_args, run_args) => {\n        const vv = freeze_values(value, run_args, gen_args);\n        return undefault(input, 0) + vv;\n    };\n}};\n\n_functions.sub = {fun: (args) => {\n    const {v: value} = expand_args({v: 0}, args);\n\n    return (input, gen_args, run_args) => {\n        const vv = freeze_values(value, run_args, gen_args);\n        return undefault(input, 0) + vv;\n    };\n}};\n\n_functions.floor = {fun: (args) => {\n    const {d: digits} = expand_args({d: 0}, args);\n\n    return (input, gen_args, run_args) => {\n        const dv = freeze_values(digits, run_args, gen_args);\n        const fact = Math.pow(10, dv);\n\n        return Math.floor(input * fact) / fact;\n    };\n}};\n\n_functions.mul = {fun: (args) => {\n    const {v: value} = expand_args({v: 0}, args);\n\n    return (input, gen_args, run_args) => {\n        const vv = freeze_values(value, run_args, gen_args);\n        return input * vv;\n    };\n}};\n\n_functions.div = {fun: (args) => {\n    const {v: value} = expand_args({v: 1}, args);\n\n    return (input, gen_args, run_args) => {\n        const vv = freeze_values(value, run_args, gen_args);\n\n        const definput = undefault(input, 0);\n        \n        if (vv === 0) {\n            return definput / 0.0000000000001;\n        }\n        return definput / vv;\n    };\n}};\n\n_functions.mod = {fun: (args) => {\n    const {v: value} = expand_args({v: 1}, args);\n\n    return (input, gen_args, run_args) => {\n        const vv = freeze_values(value, run_args, gen_args);\n        \n        if (vv === 0) {\n            return 0;\n        }\n        return undefault(input, 0) % vv;\n    };\n}};\n\nexport const functions = _functions;\n",
    "import {ud, undefault, expand_args, freeze_values, mix_values, get_time, get_bpm} from \"./util\";\n\nconst _functions = {};\n\n_functions.sah = {fun: (args) => {\n    const {h: hold_time} = expand_args({h: 1}, args);\n\n    return (input, gen_args, run_args) => {\n        const [hv] = freeze_values([hold_time], run_args, gen_args);\n\n        let prev_time = 0;\n        if (typeof gen_args.private_state.time !== 'undefined') {\n            prev_time = gen_args.private_state.time;\n        }\n        if (typeof gen_args.private_state.value === 'undefined') {\n            gen_args.private_state.value = input;\n        }\n\n        if ((gen_args.values.time - prev_time) >= hv) {\n            gen_args.private_state.value = input;\n            gen_args.private_state.time = gen_args.values.time;\n        }\n        \n        return gen_args.private_state.value;\n    };\n}};\n\nconst DEFAULT_SLEW_TYPE = 'h';\nconst SLEW_TYPES = {\n    h: (x, over) => x - over\n};\n\n_functions.slew = {fun: (args) => {\n    const {r: rate, t: type, i: ival} = expand_args({r: 0.5, t: DEFAULT_SLEW_TYPE, i: 1}, args);\n\n    return (input, gen_args, run_args) => {\n        const [rv, iv] = freeze_values([rate, ival], run_args, gen_args);\n\n        if (typeof gen_args.private_state.time === 'undefined') {\n            gen_args.private_state.time = get_time(gen_args, run_args);\n            gen_args.private_state.prev = input;\n            gen_args.private_state.tgt = input;\n            return input;\n        }\n\n        const tgt = undefault(input, gen_args.private_state.tgt);\n        if (typeof tgt === 'undefined') {\n            return ud;\n        }\n\n        if (typeof gen_args.private_state.prev === 'undefined') {\n            gen_args.private_state.prev = tgt;\n        }\n\n        const time = get_time(gen_args, run_args);\n\n        const tdiff = time - gen_args.private_state.time;\n        const vdiff = tgt - gen_args.private_state.prev;\n\n        gen_args.private_state.time = time;\n        gen_args.private_state.tgt = tgt;\n\n        const over = vdiff - ((tdiff / iv) * rv);\n\n        let nv = tgt;\n        if (over > 0) {\n            let tv = freeze_values(type, run_args, gen_args);\n\n            if (typeof tv !== 'string') {\n                tv = DEFAULT_SLEW_TYPE;\n            }\n            tv = SLEW_TYPES[tv];\n            if (typeof tv === 'undefined') {\n                tv = SLEW_TYPES[DEFAULT_SLEW_TYPE];\n            }\n            nv = tv(nv, over);\n        }\n        \n        gen_args.private_state.prev = nv;\n        return nv;\n    };\n}};\n\n_functions.map = {fun: (args) => {\n    const {f: func} = expand_args({f: (x) => x}, args);\n\n    return (value, gen_args, run_args) => func(value, gen_args, ...run_args);\n}};\n\nexport const functions = _functions;\n",
    "import {ud, undefault, expand_args, freeze_values, mix_values, get_time, get_bpm} from \"./util\";\n\nconst _functions = {};\n\n_functions.speed = {fun: (args) => {\n    const {v: value, m: mix} = expand_args({v: ud, m: ud}, args);\n\n    return (input, gen_args, run_args) => {\n        const [vv, mv] = freeze_values([value, mix], run_args, gen_args);\n        \n        let time_scale = 1;\n        if (typeof vv === 'undefined') {\n            if (typeof input !== 'undefined') {\n                time_scale = input;\n            }\n        } else if (typeof input === 'undefined') {\n            time_scale = vv;\n        } else if (typeof mv === 'undefined') {\n            time_scale = vv;\n        } else {\n            time_scale = mix_values(vv, input, mv);\n        }\n\n        gen_args.values.time = time_scale * gen_args.values.time;\n\n        return input;\n    };\n}};\n\n_functions.fast = {fun: (args) => {\n    const {s: scale, o: offset, m: mix} = expand_args({s: ud, o: 0, m: 0}, args);\n    return (input, gen_args, run_args) => {\n        const [sv, ov, mv] = freeze_values([scale, offset, mix], run_args, gen_args);\n        \n        let time_scale = 1;\n        if (typeof input === 'undefined') {\n            if (typeof sv !== 'undefined') {\n                time_scale = sv;\n            }\n        } else if (typeof sv === 'undefined') {\n            time_scale = input;\n        } else {\n            time_scale = mix_values(sv, input, mv);\n        }\n\n        gen_args.values.time = (time_scale * gen_args.values.time) + ov;\n        \n        return input;\n    };\n}};\n\n_functions.time = {fun: (args) => {\n    const {s: scale, o: offset} = expand_args({s: 1, o: 0}, args);\n\n    return (input, gen_args, run_args) => {\n        const [sv, ov] = freeze_values([scale, offset], run_args, gen_args);\n\n        return (get_time(gen_args, run_args) * sv) + ov;\n    };\n}};\n\n_functions.beats = {fun: (args) => {\n    const {s: scale, b: sbpm} = expand_args({s: 1, b: ud}, args);\n\n    return (input, gen_args, run_args) => {\n        const [sv, bv] = freeze_values([scale, sbpm], run_args, gen_args);\n        const {time, bpm} = run_args;\n        \n        let abpm = bv;\n        if (typeof abpm === 'undefined') {\n            abpm = bpm;\n        }\n\n        gen_args.values.time = undefault(time, 0) / 60 * abpm * sv;\n\n        return input;\n    };\n}};\n\n_functions.sec = {fun: (args) => {\n    const {s: scale, b: sbpm} = expand_args({s: 1, b: ud}, args);\n\n    return (input, gen_args, run_args) => {\n        const [sv, bv] = freeze_values([scale, sbpm], run_args, gen_args);\n        const time = get_time(gen_args, run_args);\n        const bpm = get_bpm(gen_args, run_args);\n        \n        let abpm = bv;\n        if (typeof abpm === 'undefined') {\n            abpm = bpm;\n        }\n\n        gen_args.values.time = undefault(time, 0) * 60 / abpm * sv;\n\n        return input;\n    };\n}};\n\nexport const functions = _functions;\n",
    "// eslint-disable-next-line no-empty-function\nexport const ud = ((function () {})());\n\nexport const CANARY = \"__hydralfo_func\";\n\nexport const mix_values = (a, b, m) => (m === 0 ? a : (m === 1 ? b : (a * (1 - m)) + (b * m)));\n\nexport const undefault = (x, def) => (typeof x === 'undefined' ? def : x);\n\nexport const expand_args = (arg_def, args) => {\n    const vals = {...undefault(arg_def, {})};\n\n    if (typeof args !== 'undefined' && args.length > 0) {\n        const [first] = args;\n        if (typeof first === 'object' && !Array.isArray(first)) {\n            for (const x in arg_def) {\n                if (x in first) {\n                    vals[x] = first[x];\n                }\n            }\n        } else {\n            let defkeys = Object.keys(arg_def);\n            defkeys = defkeys.slice(0, Math.min(defkeys.length, args.length));\n            defkeys.forEach((k, i) => {\n                vals[k] = args[i];\n            });\n        }\n    }\n\n    Object.keys(vals).forEach((x) => {\n        const vx = vals[x];\n        const ax = arg_def[x];\n\n        if (typeof vx === 'function') {\n            vals[x] = (input, call_gen_args, call_args) => {\n                let nargs = call_args;\n                if (typeof nargs === 'undefined') {\n                    nargs = [{}];\n                }\n                if (CANARY in vx) {\n                    // make a 1 level copy of the call args for the call to the sub-chain\n                    const new_call_args = [];\n\n                    nargs.forEach((arg) => {\n                        if (typeof arg === 'object') {\n                            if (Array.isArray(arg)) {\n                                new_call_args.push([...arg]);\n                            } else if (\"call\" in arg) {\n                                new_call_args.push(arg);\n                            } else {\n                                new_call_args.push({...arg});\n                            }\n                        } else {\n                            new_call_args.push(arg);\n                        }\n                    });\n\n                    return undefault(vx.run(new_call_args), ax);\n                }\n\n                return undefault(vx(input, call_gen_args, nargs), ax);\n            };\n        } else if (typeof vx === 'undefined') {\n            vals[x] = () => ax;\n        } else {\n            vals[x] = () => vx;\n        }\n    });\n\n    return vals;\n};\n\nexport const get_time = (gen_args, run_args, allow_undef = false) => {\n    let namedargs = run_args;\n\n    if (Array.isArray(namedargs) && namedargs.length > 0) {\n        [namedargs] = namedargs;\n    }\n\n    if (typeof namedargs === 'object' && !Array.isArray(namedargs)) {\n        const {time} = namedargs;\n        if (typeof time !== 'undefined') {\n            return time;\n        }\n    }\n\n    if (typeof gen_args !== 'undefined') {\n        if (typeof gen_args.values !== 'undefined' && typeof gen_args.values.time !== 'undefined') {\n            return gen_args.values.time;\n        }\n    }\n    if (typeof window !== 'undefined' && typeof window.time !== 'undefined') {\n        return window.time;\n    }\n    if (allow_undef) {\n        return ud;\n    }\n    return new Date().getTime() / 1000.0;\n};\n\nexport const get_bpm = (gen_args, run_args, allow_undef = false) => {\n    let namedargs = run_args;\n\n    if (Array.isArray(namedargs) && namedargs.length > 0) {\n        [namedargs] = namedargs;\n    }\n\n    if (typeof namedargs === 'object' && !Array.isArray(namedargs)) {\n        const {bpm} = namedargs;\n        if (typeof bpm !== 'undefined') {\n            return bpm;\n        }\n    }\n\n    if (typeof gen_args !== 'undefined'\n        && typeof gen_args.values !== 'undefined'\n        && gen_args.values.bpm !== 'undefined'\n    ) {\n        return gen_args.values.bpm;\n    }\n\n    if (allow_undef) {\n        return ud;\n    }\n    return 60;\n};\n\nexport const freeze_values = (v, args, gen_args) => {\n    if (typeof v === 'undefined') {\n        return v;\n    }\n    if (typeof v === 'function') {\n        return v(...args, gen_args);\n    }\n    if (Array.isArray(v)) {\n        return v.map((x) => freeze_values(x, args, gen_args));\n    }\n    return v;\n};\n",
    "\nimport {ud, CANARY, get_time, get_bpm} from \"./components/util\";\n\nimport {functions as maths_functions} from './components/maths';\nimport {functions as generator_functions} from './components/generators';\nimport {functions as time_functions} from './components/time';\nimport {functions as general_functions} from './components/general';\nimport {functions as modifier_functions} from './components/modifiers';\n\nconst BUILTIN_FUNCTIONS = [\n    maths_functions\n    , generator_functions\n    , time_functions\n    , general_functions\n    , modifier_functions\n].reduce((prev, ob) => {\n    Object.entries(ob).forEach(([name, value]) => {\n        prev[name] = value;\n    });\n    return prev;\n}, {});\n\nconst extract_property = (arr, prop) => Object.entries(arr)\n    .map(([name, value]) => [name, value[prop]])\n    .reduce((prev, [name, value]) => {\n        prev[name] = value;\n        return prev;\n    }, {});\n\nexport const get_doc = () => Object.entries(extract_property(BUILTIN_FUNCTIONS, \"doc\"))\n    .filter(([, doc]) => typeof doc !== 'undefined')\n    .reduce((prev, [name, doc]) => {\n        [prev[name]] = doc;\n        return prev;\n    }, {});\n\nconst run_calls = (global_state, instance_state, calls, args) => {\n    let run_args = args;\n    if (typeof run_args === 'undefined' || run_args.length === 0) {\n        run_args = [{}];\n    }\n    if (typeof run_args[0] === 'undefined') {\n        run_args[0] = {};\n    }\n\n    const gen_args = {\n        input: ud\n        , current_value: \"val\"\n        , values: {\n            val: ud\n            , initial_args: args\n            , ...run_args[0]\n        }\n        , global_state\n        , instance_state\n        , private_state: {}\n    };\n\n    gen_args.values.initial_time = get_time(gen_args.values, gen_args.values);\n    gen_args.values.time = gen_args.values.initial_time;\n    gen_args.values.val = gen_args.values.time;\n    gen_args.values.get_bpm = get_bpm(gen_args.values, gen_args.values);\n\n    run_args[0] = gen_args.values;\n\n    calls.forEach(([fncall, private_state]) => {\n        gen_args.private_state = private_state;\n        gen_args.input = gen_args.values[gen_args.current_value];\n\n        const res = fncall(gen_args.input, gen_args, run_args);\n\n        gen_args.values[gen_args.current_value] = res;\n    });\n    \n    const rval = gen_args.values[gen_args.current_value];\n    if (typeof rval === 'undefined') {\n        return 0;\n    }\n\n    return rval;\n};\n\nconst sub_call = (global_state, prev_calls, fun) => {\n    const calls = prev_calls.map((x) => [x, {}]);\n    const instance_state = {};\n\n    if (typeof fun !== 'undefined') {\n        calls.push([fun, {}]);\n    }\n\n    const rfun = (...args) => run_calls(global_state, instance_state, calls, args);\n    rfun.run = rfun;\n    rfun.gen = () => rfun;\n    rfun[CANARY] = true;\n\n    Object.entries(extract_property(BUILTIN_FUNCTIONS, \"fun\"))\n        .forEach(([name, gen]) => {\n            if (name in rfun && !(name in Object.getOwnPropertyNames())) {\n                throw new Error(`${name} already exists on parents of rfun`);\n            }\n\n            rfun[name] = (...args) => sub_call(\n                global_state\n                , calls.map(([call]) => call)\n                , gen(args)\n            );\n        });\n\n    return rfun;\n};\n\nconst get_global_env = () => {\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    return global;\n};\n\nconst make_new_lfo = (state) => {\n    const fdef = {};\n    const global_state = typeof state === 'undefined' ? {} : state;\n    \n    const functions = extract_property(BUILTIN_FUNCTIONS, \"fun\");\n\n    Object.keys(functions).forEach((name) => {\n        fdef[name] = (...args) => sub_call(global_state, [])[name](...args);\n    });\n\n    fdef.__release = (new_lfo) => {\n        // for future use, e.g. to stop timeouts etc\n    };\n\n    return fdef;\n};\n\nconst GLOBAL_INIT_ID = \"__hydralfo_global\";\n\nexport const init = (state = ud, init_global = true, force = false) => {\n    const new_lfo = make_new_lfo(state);\n\n    if (!init_global) {\n        return new_lfo;\n    }\n\n    const env = get_global_env();\n\n    if (typeof env !== 'undefined') {\n        if (GLOBAL_INIT_ID in env) {\n            const old_lfo = env[GLOBAL_INIT_ID];\n            if (typeof old_lfo === 'object') {\n                if (!force) {\n                    return env[GLOBAL_INIT_ID];\n                }\n                if ('__release' in old_lfo) {\n                    old_lfo.__release(new_lfo);\n                }\n            }\n        }\n        env[GLOBAL_INIT_ID] = new_lfo;\n    }\n\n    return new_lfo;\n};\n"
  ]
}